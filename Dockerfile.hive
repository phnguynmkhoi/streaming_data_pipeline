# Use the official Hive image as base
FROM apache/hive:3.1.3
# Install wget to download the MySQL connector
USER root
RUN apt-get update && apt-get install -y wget

# Download and install MySQL connector
RUN wget https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar \
    -O /opt/hive/lib/mysql-connector-j-8.0.33.jar

# Set proper permissions
RUN chmod 644 /opt/hive/lib/mysql-connector-j-8.0.33.jar

# Switch back to hive user
USER hive